import{u as j,r as c,j as n,a as x,Q as h,b as g,F as S,M as F}from"./index-2791dd49.js";import{F as b,a as V,T as E,L as f,E as w,b as I,c as M,I as $,d as L,S as T,e as B}from"./AuthForms.styled-424c9d9f.js";import{L as G,G as O,V as C}from"./VerifyForm-ddb73ab8.js";import{s as D}from"./clusterSchema-17401380.js";const d={name:"",email:"",password:""},R=()=>{const r=j(),[t,i]=c.useState("password"),u=({values:e,errors:a,key:s})=>{const l=!e[s]&&"noValue",o=a[s]?"error":"success";return l||o},p=({errors:e,values:a})=>{const s=Object.keys(e).length;return Object.keys(a).some(o=>!a[o])||s},m=(e,a)=>{r(x(e)).unwrap().catch(s=>s.includes("401")&&h.error("Unauthorized")),a.resetForm()};return n.jsx(b,{initialValues:d,validationSchema:D,onSubmit:m,children:({values:e,errors:a})=>n.jsxs(V,{children:[n.jsxs(E,{children:[n.jsx("h2",{children:"Sign up"}),n.jsx(G,{to:"/signin",children:"Have an account?"})]}),Object.keys(d).map(s=>n.jsxs(c.Fragment,{children:[n.jsxs(f,{children:[s.at(0).toUpperCase()+s.substring(1),n.jsx("pre",{children:" "}),n.jsx(w,{name:s,component:"span"})]}),n.jsxs(I,{children:[n.jsx(M,{type:s==="password"?t:s,name:s,$validation:u({values:e,errors:a,key:s})}),s==="password"&&n.jsx($,{toggle:t,setToggle:i}),e[s]&&a[s]&&n.jsx(L,{}),e[s]&&!a[s]&&n.jsx(T,{})]})]},s)),n.jsx(B,{disabled:p({values:e,errors:a}),children:"Sign up"}),n.jsx(O,{children:"Sign up with Google"})]})})},H=()=>{const{user:r}=g(),[t,i]=c.useState(r.email&&!r.verifiedEmail);return n.jsxs(S,{$w:"400px",$p:"0",$fd:"column",$jc:"center",children:[n.jsx(R,{}),t&&n.jsx(F,{onClick:()=>i(!t),children:n.jsx(C,{userEmail:r.email})})]})};export{H as default};
